<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸ“ž First Contact Template â€“ First Call</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f8f9fa;
      padding: 2rem;
      line-height: 1.4;
    }
    h1 { text-align: center; }
    form {
      max-width: 700px;
      margin: auto;
      background: #fff;
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    fieldset {
      margin-bottom: 1.5rem;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 1rem;
    }
    legend { font-weight: bold; }
    label { display: block; margin-top: .7rem; font-weight: bold; }
    input, textarea {
      width: 100%;
      padding: .5rem;
      margin-top: .3rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    textarea { resize: vertical; }
    .radio-group { margin-top: .3rem; }
    button {
      margin: .5rem .25rem;
      padding: .6rem 1.2rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }
    #doneBtn { background: #dc3545; color: #fff; }
    #printBtn { background: #0d6efd; color: #fff; }
    #copyBtn { background: #198754; color: #fff; }
    #notice {
      text-align: center;
      margin-top: 1rem;
      font-weight: bold;
      color: #198754;
      display: none;
    }
  </style>
</head>
<body>
  <h1>ðŸ“ž First Contact Template â€“ First Call</h1>

  <form id="intakeForm" autocomplete="off">
    <fieldset>
      <legend>Client Information</legend>
      <div class="field" data-question="Name">
        <label>Name:</label>
        <input type="text" name="name">
      </div>
      <div class="field" data-question="Phone Number">
        <label>Phone Number:</label>
        <input type="tel" name="phone">
      </div>
      <div class="field" data-question="Email Address">
        <label>Email Address:</label>
        <input type="email" name="email">
      </div>
      <div class="field" data-question="Address">
        <label>Address:</label>
        <input type="text" name="address">
      </div>
      <div class="field" data-question="City">
        <label>City:</label>
        <input type="text" name="city">
      </div>
      <div class="field" data-question="Zip Code">
        <label>Zip Code:</label>
        <input type="text" name="zip">
      </div>
      <div class="field" data-question="Have you worked with us before?">
        <label>Have you worked with us before?</label>
        <div class="radio-group">
          <input type="radio" name="workedBefore" value="Yes"> Yes
          <input type="radio" name="workedBefore" value="No"> No
        </div>
      </div>
      <div class="field" data-question="How did you hear about us">
        <label>How did you hear about us?</label>
        <input type="text" name="referral">
      </div>
      <div class="field" data-question="Do you remember who you worked with?">
        <label>Do you remember who you worked with?</label>
        <input type="text" name="whoWorkedWith">
      </div>
    </fieldset>

    <fieldset>
      <legend>Project Information</legend>
      <div class="field" data-question="Project Address">
        <label>Project Address:</label>
        <input type="text" name="projectAddress">
      </div>
      <div class="field" data-question="Timeline">
        <label>Do you have a timeline in mind?</label>
        <input type="text" name="timeline">
      </div>
      <div class="field" data-question="Scope of Work">
        <label>Scope of Work:</label>
        <textarea name="scope"></textarea>
      </div>
      <div class="field" data-question="Best Time to Contact">
        <label>Best Time to Contact:</label>
        <input type="text" name="bestTime">
      </div>
    </fieldset>

    <fieldset>
      <legend>For Roofing Projects (if applicable)</legend>
      <div class="field" data-question="Is the roof currently leaking?">
        <label>Is the roof currently leaking?</label>
        <div class="radio-group">
          <input type="radio" name="roofLeaking" value="Yes"> Yes
          <input type="radio" name="roofLeaking" value="No"> No
        </div>
      </div>
      <div class="field" data-question="How many stories is your building?">
        <label>How many stories is your building?</label>
        <input type="number" name="stories">
      </div>
      <div class="field" data-question="Notes">
        <label>Notes:</label>
        <textarea name="notes"></textarea>
      </div>
    </fieldset>

    <div style="text-align:center;">
      <button type="button" id="copyBtn">Copy Answers</button>
      <button type="button" id="printBtn">Print</button>
      <button type="button" id="doneBtn">Done</button>
    </div>

    <div id="notice"></div>
  </form>

  <script>
    const form = document.getElementById('intakeForm');
    const notice = document.getElementById('notice');

    // Reset form if back/forward cache is used
    window.addEventListener('pageshow', (e) => { if (e.persisted) form.reset(); });

    // Prevent accidental submit
    form.addEventListener('submit', (e) => e.preventDefault());

    // Done button clears form
    document.getElementById('doneBtn').addEventListener('click', () => {
      form.reset();
      showNotice("Form cleared. Nothing was saved or sent.");
    });

    // Print button
    document.getElementById('printBtn').addEventListener('click', () => window.print());

    // Copy Answers button (with fallback)
    document.getElementById('copyBtn').addEventListener('click', async () => {
      let output = [];

      form.querySelectorAll("fieldset").forEach(fs => {
        const legend = fs.querySelector("legend");
        if (legend) output.push(`=== ${legend.innerText.trim()} ===`);

        fs.querySelectorAll(".field").forEach(f => {
          const label = f.dataset.question || "";
          let value = "";

          const radios = f.querySelectorAll("input[type=radio]");
          if (radios.length) {
            const checked = f.querySelector("input[type=radio]:checked");
            value = checked ? checked.value : "";
          } else {
            const el = f.querySelector("input, textarea, select");
            if (el) value = el.value.trim();
          }
          output.push(`${label}: ${value}`);
        });

        output.push("");
      });

      const text = output.join("\n");

      try {
        await navigator.clipboard.writeText(text);
        showNotice("Form answers copied to clipboard!");
      } catch (err) {
        console.warn("Clipboard API failed, using fallback:", err);

        // Fallback: hidden textarea trick
        const fallbackBox = document.createElement("textarea");
        fallbackBox.value = text;
        document.body.appendChild(fallbackBox);
        fallbackBox.select();
        document.execCommand("copy");
        document.body.removeChild(fallbackBox);

        showNotice("Copied using fallback method (works in Chrome).");
      }
    });

    function showNotice(msg) {
      notice.textContent = msg;
      notice.style.display = "block";
      setTimeout(() => { notice.style.display = "none"; }, 3000);
    }

    // Disable autofill
    Array.from(form.elements).forEach(el => {
      if (["INPUT", "TEXTAREA", "SELECT"].includes(el.tagName)) {
        el.setAttribute("autocomplete", "off");
      }
    });
  </script>
</body>
</html>
